<!DOCTYPE html>

<html>
<head>
  <title>mcdonough-eats.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>mcdonough-eats.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*  The McDonoughEats function acts as the ViewModel for this application.
It also holds the model but maintains seperation of concerns using the MVVM design patter.
*/</span>

<span class="hljs-keyword">var</span> McDonoughEats = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
</span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

  <span class="hljs-comment">/* initialPlaces is an array of local restaurant names and phone numbers.
  it acts as the initial data model */</span>
  <span class="hljs-keyword">var</span> initialPlaces =
  [
    {
      name: <span class="hljs-string">"Kirby G's"</span>,
      tel: <span class="hljs-string">'6785838777'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">'Queen Bee Coffee'</span>,
      tel: <span class="hljs-string">'6788832233'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },

    {
      name: <span class="hljs-string">'Pasta Max'</span>,
      tel: <span class="hljs-string">'7703209311'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">'South Side Diner'</span>,
      tel: <span class="hljs-string">'6787592690'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">'Gritz'</span>,
      tel: <span class="hljs-string">'7709140448'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">"Truett's Grill"</span>,
      tel: <span class="hljs-string">'6784322221'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">'Deep South Deli'</span>,
      tel: <span class="hljs-string">'6783008999'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    },
    {
      name: <span class="hljs-string">"Mikie's Big Burger"</span>,
      tel: <span class="hljs-string">'7709544306'</span>,
      visible:<span class="hljs-string">'TRUE'</span>
    }
  ];</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>additional model variables
since this app utilizes the knockoutjs framework there are knockout observables used here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> map;
  <span class="hljs-keyword">var</span> workArray = ko.observableArray();
  <span class="hljs-keyword">var</span> markerArray ;
  <span class="hljs-keyword">var</span> yelpAttrib= ko.observable(<span class="hljs-string">'http://www.yelp.com'</span>) ;
  <span class="hljs-keyword">var</span> yelpImgAttrib= ko.observable(<span class="hljs-string">'https://s3-media1.fl.yelpcdn.com/assets/srv0/developer_pages/dc8ff90d5d7d/assets/img/Powered_By_Yelp_Black.png'</span>);
  <span class="hljs-keyword">var</span> userInput = ko.observable(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">var</span> lenInitialPlaces = initialPlaces.length;
  <span class="hljs-keyword">var</span> bound = <span class="hljs-keyword">new</span> google.maps.LatLngBounds();
  <span class="hljs-keyword">var</span> selectedRestaurant = ko.observable(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">var</span> infowindow = <span class="hljs-keyword">new</span> google.maps.InfoWindow({
    content: <span class="hljs-string">''</span>
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>initiate the google map</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> initMap = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>put the map in the mapbox element and center it on the target city</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      map = <span class="hljs-keyword">new</span> google.maps.Map(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'mapBox'</span>),
        {
          center: {lat: <span class="hljs-number">33.4469617</span>, lng: -<span class="hljs-number">84.1419653</span>},
          scrollwheel: <span class="hljs-literal">false</span>,
          zoom: <span class="hljs-number">13</span>,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        });
    }());</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>makeMarker function deletes any existing markers, and then creates a marker for each element in the workArray</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> makeMarker = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
      <span class="hljs-keyword">if</span> (markerArray)
        {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; markerArray.length; i++)
            {
              markerArray[i].marker.setMap(<span class="hljs-literal">null</span>);
            }
        }
      markerArray=[];
      <span class="hljs-keyword">var</span> bound = <span class="hljs-keyword">new</span> google.maps.LatLngBounds();
      markerArray=workArray.slice();

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j&lt;markerArray.length;j++)
        {
          markerArray[j].marker = <span class="hljs-keyword">new</span> google.maps.Marker(
            {
              position: markerArray[j].latlng,
              title: markerArray[j].name,
              map: map
            });
          bound.extend(markerArray[j].marker.getPosition());</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>click listener for markers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          setClickListener(markerArray[j].marker, markerArray[j]);
        }
      <span class="hljs-keyword">if</span> (markerArray.length &gt; <span class="hljs-number">1</span>)
        {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>change the map zoom to the remaining locations</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          map.fitBounds(bound);
        }
      <span class="hljs-keyword">if</span> (markerArray.length ===<span class="hljs-number">1</span>)
        {
          map.setZoom(<span class="hljs-number">19</span>);
          <span class="hljs-keyword">var</span> singleLocation = markerArray[<span class="hljs-number">0</span>].marker.getPosition();
          map.setCenter(singleLocation);
        }
      zoomListener = google.maps.event.addListenerOnce(map, <span class="hljs-string">'change zoom'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)
        </span>{
          map.setCenter(bound.getCenter());
        });
      setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
        </span>{
          google.maps.event.removeListener(zoomListener)
        }, <span class="hljs-number">2000</span>);





    };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>on marker click pass the clicked marker to the marker activate function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> setClickListener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, name</span>)
    </span>{
      <span class="hljs-keyword">var</span> dummy;
      data.addListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
        </span>{
          mrkerActivate(name  , dummy);
        });
      <span class="hljs-keyword">return</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>updateWorkArray changes the work array whenever the sort changes or the data model changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> updateWorkArray = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
      workArray([]);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k=<span class="hljs-number">0</span>;k&lt;lenInitialPlaces;k++)
        {
          <span class="hljs-keyword">if</span> (initialPlaces[k].visible == <span class="hljs-string">'TRUE'</span>)
            {
              workArray.push(initialPlaces[k]);
            }
        }
      <span class="hljs-keyword">if</span> (workArray().length &gt;= <span class="hljs-number">1</span>)
        {
          <span class="hljs-keyword">if</span> (workArray()[workArray().length-<span class="hljs-number">1</span>].latitude)
            {
              makeMarker();
            }
        }
      <span class="hljs-keyword">if</span> (workArray().length === <span class="hljs-number">0</span>)
        {
          makeMarker();
        }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>updateModel takes the data returned by the ajax request and adds the desired parts to the initialPlaces
array elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-keyword">var</span> updateModel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k,data</span>)
  </span>{

    initialPlaces[k].review_count=data.businesses[<span class="hljs-number">0</span>].review_count;
    initialPlaces[k].postal_code=data.businesses[<span class="hljs-number">0</span>].location.postal_code;
    initialPlaces[k].state_code=data.businesses[<span class="hljs-number">0</span>].location.state_code;
    initialPlaces[k].city=data.businesses[<span class="hljs-number">0</span>].location.city;
    initialPlaces[k].address=data.businesses[<span class="hljs-number">0</span>].location.address;
    initialPlaces[k].snippet_text=data.businesses[<span class="hljs-number">0</span>].snippet_text;
    initialPlaces[k].snippet_image_url=data.businesses[<span class="hljs-number">0</span>].snippet_image_url;
    initialPlaces[k].image_url=data.businesses[<span class="hljs-number">0</span>].image_url;
    initialPlaces[k].rating_img_url=data.businesses[<span class="hljs-number">0</span>].rating_img_url;
    initialPlaces[k].review_count=data.businesses[<span class="hljs-number">0</span>].review_count;
    initialPlaces[k].url=data.businesses[<span class="hljs-number">0</span>].url;
    initialPlaces[k].latitude=data.businesses[<span class="hljs-number">0</span>].location.coordinate.latitude;
    initialPlaces[k].longitude=data.businesses[<span class="hljs-number">0</span>].location.coordinate.longitude;
    initialPlaces[k].latlng =
      {
        lat: initialPlaces[k].latitude,
        lng: initialPlaces[k].longitude
      };
    updateWorkArray();
  };


  <span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>The yelpInfo function contains the keys needed to utilize the OAuth authentication process for the Yelp API</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> yelpInfo = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{
      <span class="hljs-keyword">var</span> auth =
        {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Yelp OAuth data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          consumerKey: <span class="hljs-string">"sB9MQlZkUAFlQR5P8iRwCw"</span>,
          consumerSecret: <span class="hljs-string">"HQb8up0L05VUZVjMEzAAxm_XIx4"</span>,
          accessToken: <span class="hljs-string">"7dsLP8pY0a17kCRjPlFlSIplD4l1J77c"</span>,
          accessTokenSecret: <span class="hljs-string">"sL9Hj1nFYN3HvRMKI4_ph8bvQdE"</span>,
          serviceProvider:
            {
              signatureMethod: <span class="hljs-string">"HMAC-SHA1"</span>
            }
        };



      <span class="hljs-keyword">var</span> accessor =
        {
          consumerSecret: auth.consumerSecret,
          tokenSecret: auth.accessTokenSecret
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>configuration of the oauth parameters array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      parameters = [];
      parameters.push([<span class="hljs-string">'phone'</span>, initialPlaces[i].tel]);
      parameters.push([<span class="hljs-string">'callback'</span>, <span class="hljs-string">'cb'</span>]);
      parameters.push([<span class="hljs-string">'oauth_consumer_key'</span>, auth.consumerKey]);
      parameters.push([<span class="hljs-string">'oauth_consumer_secret'</span>, auth.consumerSecret]);
      parameters.push([<span class="hljs-string">'oauth_token'</span>, auth.accessToken]);
      parameters.push([<span class="hljs-string">'oauth_signature_method'</span>, <span class="hljs-string">'HMAC-SHA1'</span>]);</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>configures the getter for oauth</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> message =
        {
          <span class="hljs-string">'action'</span>: <span class="hljs-string">'http://api.yelp.com/v2/phone_search?'</span>,
          <span class="hljs-string">'method'</span>: <span class="hljs-string">'GET'</span>,
          <span class="hljs-string">'parameters'</span>: parameters
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>makes the authentication call</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      OAuth.setTimestampAndNonce(message);
      OAuth.SignatureMethod.sign(message, accessor);
      <span class="hljs-keyword">var</span> parameterMap = OAuth.getParameterMap(message.parameters);
      parameterMap.oauth_signature = OAuth.percentEncode(parameterMap.oauth_signature);</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Once authenticated makes the ajax request for the entries in the data model.
An ajax failure returns an alert advising the user to retry.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $.ajax(
        {
          url: message.action,
          data: parameterMap,
          cache: <span class="hljs-literal">true</span>,
          dataType: <span class="hljs-string">'jsonp'</span>,
          success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)
            </span>{
              <span class="hljs-keyword">if</span> ( i &lt; lenInitialPlaces)
                {
                  updateModel(i,data);
                  i++;
                  <span class="hljs-keyword">if</span> (i&lt;lenInitialPlaces)
                    {
                      yelpInfo();
                    }
                }
            },
          error: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
        alert(<span class="hljs-string">'Sorry, something went wrong. Please try again.'</span>);
    }
        });

    };  <span class="hljs-comment">//closes yelpInfo</span>

  yelpInfo();</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>sets the visible property based on searchbox state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> makeViz = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)
    </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>if the searchbox is empty mark all items visible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (userInput.toLowerCase === <span class="hljs-string">""</span>)
        {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>; n &lt; lenInitialPlaces; n++)
            {
              initialPlaces[n].visible=<span class="hljs-string">'TRUE'</span>;
            }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>if something is in the search box compare it to the names of the places
if there is not a  match mark initialPlaces.visible as FALSE
else mark “TRUE”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> rex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>($(<span class="hljs-string">'#searchBox'</span>).val(), <span class="hljs-string">"i"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> p = <span class="hljs-number">0</span>; p &lt;lenInitialPlaces; p++)
          {
            <span class="hljs-keyword">if</span> (!rex.test(initialPlaces[p].name))
              {
                initialPlaces[p].visible =<span class="hljs-string">'FALSE'</span>;
              }
            <span class="hljs-keyword">else</span>
              {
                initialPlaces[p].visible =<span class="hljs-string">'TRUE'</span>;
              }
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>since the data model changed, update the workArray</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        updateWorkArray();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>mrkerActivate clears any existing selectedRestaurant, then updates the selectedRestaurant.
Once set, it iterates through the markerArray and when it finds a matching marker name it bounces the marker and then stops the bounces.
Next, it populates the contentString used to populate the infoWindow.
Finally, it places that content in the infoWindow and places it on the map.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> mrkerActivate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, event</span>)
    </span>{
      selectedRestaurant  = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">var</span> contentString;
      selectedRestaurant  = data.name;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j &lt; markerArray.length; j++)
        {
          markerArray[j].marker.setAnimation(<span class="hljs-literal">null</span>);
          <span class="hljs-keyword">if</span> (markerArray[j].name == selectedRestaurant)
            {
              <span class="hljs-keyword">var</span> selectedMarker = markerArray[j].marker;
              selectedMarker.setAnimation(google.maps.Animation.BOUNCE);
              stopBounce(selectedMarker);
              <span class="hljs-keyword">var</span> currentAddress = markerArray[j].address+<span class="hljs-string">', '</span>+markerArray[j].city+<span class="hljs-string">', '</span>+markerArray[j].state_code+<span class="hljs-string">' '</span>+markerArray[j].postal_code;
              <span class="hljs-keyword">var</span> currentPhone = <span class="hljs-string">'('</span>+markerArray[j].tel.slice(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)+<span class="hljs-string">') '</span>+markerArray[j].tel.slice(<span class="hljs-number">3</span>,<span class="hljs-number">6</span>)+<span class="hljs-string">'-'</span>+markerArray[j].tel.slice(<span class="hljs-number">6</span>,<span class="hljs-number">10</span>);
              <span class="hljs-keyword">var</span> currentSnippetText = markerArray[j].snippet_text;
              contentString =
              <span class="hljs-string">'&lt;div id="infoWindowContainer"&gt;'</span>+
                <span class="hljs-string">'&lt;h2 class="infoWindowHeader"&gt;'</span>+selectedRestaurant+<span class="hljs-string">'&lt;/h2&gt;'</span>+
                <span class="hljs-string">'&lt;div class ="row" id="imageRow"&gt;'</span>+
                  <span class="hljs-string">'&lt;div class = "col-md-2 col-sm-2 col-xs-2" id = "restPic"&gt;'</span>+
                    <span class="hljs-string">'&lt;img src='</span>+markerArray[j].image_url+<span class="hljs-string">'&gt;'</span>+
                  <span class="hljs-string">'&lt;/div&gt;'</span>+
                  <span class="hljs-string">'&lt;div class = "col-md-2 col-sm-2 col-xs-2" id = "snippetPic"&gt;'</span>+
                    <span class="hljs-string">'&lt;img class= "snippetPic" src='</span>+markerArray[j].snippet_image_url+<span class="hljs-string">'&gt;'</span>+
                  <span class="hljs-string">'&lt;/div&gt;'</span>+
                  <span class="hljs-string">'&lt;div class =  "col-md-8 col-sm-8 hidden-sm hidden-xs"&gt;'</span>+
                    <span class="hljs-string">'&lt;p id="introText"&gt; Click the telephone number to call this restaurant, or click the link below for more information:&lt;/p&gt;'</span>+
                    <span class="hljs-string">'&lt;p class = "snippetText"&gt;'</span>+currentSnippetText+<span class="hljs-string">'&lt;/p&gt;'</span>+
                  <span class="hljs-string">'&lt;/div&gt;'</span>+
                <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;div class = "row" id ="addressRow"&gt;'</span>+
                <span class="hljs-string">'&lt;div class="col-md-12 col-sm-12 hidden-sm hidden-xs"&gt;'</span>+
                  <span class="hljs-string">'&lt;p id="addressP"&gt;&lt;b&gt; Address: '</span>+ currentAddress + <span class="hljs-string">'&lt;/b&gt;&lt;/p&gt;'</span>+
                <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;div class = "row" id = "phoneRow"&gt;'</span>+
                <span class="hljs-string">'&lt;div class="col-md-12 col-sm-12 col-xs-12"&gt;'</span>+
                  <span class="hljs-string">'&lt;p id="phoneP"&gt;&lt;b&gt; Phone: '</span>+<span class="hljs-string">'&lt;a href=tel:'</span>+ markerArray[j].tel+<span class="hljs-string">'&gt;'</span>+ currentPhone+<span class="hljs-string">'&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;'</span>+
                <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;img src='</span>+markerArray[j].rating_img_url+<span class="hljs-string">'&gt;'</span>+
              markerArray[j].review_count+<span class="hljs-string">' reviews  '</span>+
              <span class="hljs-string">'&lt;img src='</span>+yelpImgAttrib()+<span class="hljs-string">'&gt;'</span>+

              <span class="hljs-string">'&lt;p&gt; &lt;a href='</span>+markerArray[j].url+<span class="hljs-string">' target="_blank"&gt;Click here to visit this page on Yelp.com'</span>+
              <span class="hljs-string">'&lt;/p&gt;&lt;/a&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>var infoWindowOptions = { max-width: 75%};</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
              infowindow.setContent(contentString);
              infowindow.open(map, selectedMarker);
            }
        }
      <span class="hljs-keyword">return</span>;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>stops the map marker bounce after approx 2 bounces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopBounce</span>(<span class="hljs-params">marker</span>)
    </span>{
      setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
        </span>{
          marker.setAnimation(<span class="hljs-literal">null</span>);
        }, <span class="hljs-number">1400</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>required by knockoutjs to initiate the viewmodel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> init = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)
    </span>{
      ko.applyBindings(McDonoughEats);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>jQuery starts this file on document ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $(init);</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>function returns</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">return</span>{
    mrkerActivate: mrkerActivate,
    userInput: userInput,
    makeViz: makeViz,
    yelpAttrib: yelpAttrib,
    yelpImgAttrib: yelpImgAttrib,
    workArray: workArray,
    makeMarker: makeMarker,
    initMap: initMap,
    map: map,
    updateWorkArray: updateWorkArray
    };
    }();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
